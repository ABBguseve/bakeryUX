{"remainingRequest":"C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\src\\views\\bestallningar.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\src\\views\\bestallningar.vue","mtime":1622448108510},{"path":"C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621491293757},{"path":"C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\babel-loader\\lib\\index.js","mtime":1621491293202},{"path":"C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1621491293757},{"path":"C:\\Users\\Super\\Documents\\GitHub\\bakeryUX\\website\\node_modules\\vue-loader\\lib\\index.js","mtime":1621491314750}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBcHAiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbkNhcnQ6IG51bGwsCiAgICAgIGN1cnJVc2VyOiBudWxsLAogICAgICBkaXNhYmxlZDogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5pbkNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpbkNhcnQiKSk7CiAgICB0aGlzLmN1cnJVc2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiU3RvcmFnZV9jdXN0b21lciIpKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKElEKSB7CiAgICAgIHZhciBjYXJ0SXRlbXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpbkNhcnQiKSk7CgogICAgICBmb3IgKHZhciBpdGVtIGluIGNhcnRJdGVtcykgewogICAgICAgIGlmIChjYXJ0SXRlbXNbaXRlbV0uaWQgPT0gSUQpIHsKICAgICAgICAgIGlmIChjYXJ0SXRlbXNbaXRlbV0ucXVhbnRpdHkgPT0gMCkgewogICAgICAgICAgICBjYXJ0SXRlbXNbaXRlbV0gPSAwOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjYXJ0SXRlbXMpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FydEl0ZW1zW2l0ZW1dLnF1YW50aXR5IC09IDE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaW5DYXJ0Iik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpbkNhcnQiLCBKU09OLnN0cmluZ2lmeShjYXJ0SXRlbXMpKTsKICAgICAgdGhpcy5pbkNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpbkNhcnQiKSk7CiAgICB9LAogICAgYWRkOiBmdW5jdGlvbiBhZGQoSUQpIHsKICAgICAgdmFyIGNhcnRJdGVtcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oImluQ2FydCIpKTsKCiAgICAgIGZvciAodmFyIGl0ZW0gaW4gY2FydEl0ZW1zKSB7CiAgICAgICAgaWYgKGNhcnRJdGVtc1tpdGVtXS5pZCA9PSBJRCkgewogICAgICAgICAgY2FydEl0ZW1zW2l0ZW1dLnF1YW50aXR5ICs9IDE7CiAgICAgICAgfQogICAgICB9CgogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaW5DYXJ0Iik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpbkNhcnQiLCBKU09OLnN0cmluZ2lmeShjYXJ0SXRlbXMpKTsKICAgICAgdGhpcy5pbkNhcnQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJpbkNhcnQiKSk7CiAgICB9LAogICAgb3JkZXI6IGZ1bmN0aW9uIG9yZGVyKCkgewogICAgICB2YXIgY2FrZUxpc3QgPSBbXTsKICAgICAgdmFyIGluQ2FydCA9IHRoaXMuaW5DYXJ0OwoKICAgICAgZm9yICh2YXIgaSBpbiBpbkNhcnQpIHsKICAgICAgICBpZiAoaW5DYXJ0W2ldLnF1YW50aXR5ID4gMCkgewogICAgICAgICAgY2FrZUxpc3QucHVzaCh7CiAgICAgICAgICAgIGlkOiBpbkNhcnRbaV0uaWQsCiAgICAgICAgICAgIHF1YW50aXR5OiBpbkNhcnRbaV0ucXVhbnRpdHkKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdmFyIG9yZGVySXRlbSA9IHsKICAgICAgICBjdXN0b21lcklEOiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJTdG9yYWdlX2N1c3RvbWVyIikpLmlkLAogICAgICAgIGNha2VzOiBjYWtlTGlzdCwKICAgICAgICB0b3RhbFByaWNlOiB0aGlzLnRvdFByaWNlCiAgICAgIH07CiAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9vcmRlcnMnLCBvcmRlckl0ZW0pOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiaW5DYXJ0Iik7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJpbkNhcnQiLCBKU09OLnN0cmluZ2lmeShbXSkpOwogICAgICB0aGlzLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgYWxlcnQoIkRpbiBiZXN0w6RsbG5pbmcgw6RyIHNraWNrYWQhIik7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdG90UHJpY2U6IGZ1bmN0aW9uIHRvdFByaWNlKCkgewogICAgICB2YXIgdG90YWxQcmljZSA9IDA7CgogICAgICBmb3IgKHZhciBpIGluIHRoaXMuaW5DYXJ0KSB7CiAgICAgICAgaWYgKHRoaXMuaW5DYXJ0W2ldLnF1YW50aXR5ID4gMCkgewogICAgICAgICAgdG90YWxQcmljZSArPSB0aGlzLmluQ2FydFtpXS5wcmljZSAqIHRoaXMuaW5DYXJ0W2ldLnF1YW50aXR5OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRvdGFsUHJpY2U7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["bestallningar.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <div\r\n            class=\"d-flex flex-column justify-center align-center\"\r\n            style=\"font-family: 'Lobster', cursive; width: 100%; text-align: center\"\r\n            v-if=\"currUser\"\r\n        >\r\n            <div style=\"width: 80%\" v-for=\"i in inCart\" :key=\"i.id\">\r\n                <div v-if=\"i.quantity > 0\" style=\"display: flex\">\r\n                    <h1 >{{i.name}}</h1>\r\n                    <v-spacer></v-spacer>\r\n                    <h2>{{i.quantity}}</h2>\r\n                    <v-btn\r\n                        fab\r\n                        color=\"positive\"\r\n                        small\r\n                        @click=\"add(i.id)\"\r\n                        class=\"ml-5\"\r\n                    >\r\n                    <v-icon>mdi-plus</v-icon>\r\n                    </v-btn>\r\n                    <v-btn\r\n                        fab\r\n                        small\r\n                        color=\"negative\"\r\n                        class=\"ml-5\"\r\n                        @click=\"remove(i.id)\"\r\n                    >\r\n                    <v-icon>mdi-minus</v-icon>\r\n                    </v-btn>\r\n                </div>\r\n            </div>\r\n            <h1 class=\"mt-15\">Totalt pris: {{totPrice}}Kr</h1>\r\n            <v-btn\r\n                class=\"navBtn mt-15\"\r\n                color=\"primary\"\r\n                x-large\r\n                @click=\"order()\"\r\n                :disabled=\"disabled\"\r\n            >Beställ nu!</v-btn>\r\n        </div>\r\n        <div\r\n            class=\"d-flex flex-column justify-center align-center\"\r\n            style=\"font-family: 'Lobster', cursive; width: 100%; text-align: center\"\r\n            v-else\r\n        >\r\n        <h1 style=\"color: #599FA8\">Logga in för att handla</h1>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nexport default {\r\n  name: \"App\",\r\n\r\n  data: () => ({\r\n      inCart: null,\r\n      currUser: null,\r\n      disabled: false\r\n  }),\r\n  mounted () {\r\n      this.inCart = JSON.parse(localStorage.getItem(\"inCart\"))\r\n      this.currUser = JSON.parse(localStorage.getItem(\"Storage_customer\"))\r\n  },\r\n  methods: {\r\n      remove(ID){\r\n        let cartItems = JSON.parse(localStorage.getItem(\"inCart\"))\r\n        for(let item in cartItems){\r\n            if(cartItems[item].id == ID){\r\n                if(cartItems[item].quantity == 0){\r\n                    cartItems[item] = 0\r\n                    console.log(cartItems)\r\n                }\r\n                else{\r\n                    cartItems[item].quantity -= 1\r\n                }\r\n            }\r\n        }\r\n        localStorage.removeItem(\"inCart\")\r\n        localStorage.setItem(\"inCart\", JSON.stringify(cartItems))\r\n        this.inCart = JSON.parse(localStorage.getItem(\"inCart\"))\r\n    },\r\n    add(ID){\r\n        let cartItems = JSON.parse(localStorage.getItem(\"inCart\"))\r\n        for(let item in cartItems){\r\n            if(cartItems[item].id == ID){\r\n                cartItems[item].quantity += 1\r\n            }\r\n        }\r\n        localStorage.removeItem(\"inCart\")\r\n        localStorage.setItem(\"inCart\", JSON.stringify(cartItems))\r\n        this.inCart = JSON.parse(localStorage.getItem(\"inCart\"))\r\n    },\r\n    order(){\r\n        let cakeList = []\r\n        let inCart = this.inCart\r\n        for(let i in inCart){\r\n            if(inCart[i].quantity > 0){\r\n                cakeList.push({id: inCart[i].id, quantity: inCart[i].quantity})\r\n            }   \r\n        }\r\n        const orderItem = {customerID: JSON.parse(localStorage.getItem(\"Storage_customer\")).id, cakes: cakeList, totalPrice: this.totPrice}\r\n        axios\r\n        .post('http://localhost:3000/orders', orderItem)\r\n\r\n        localStorage.removeItem(\"inCart\")\r\n        localStorage.setItem(\"inCart\", JSON.stringify([]))\r\n        this.disabled = true\r\n        alert(\"Din beställning är skickad!\")\r\n        this.$router.push(\"/\")\r\n    }\r\n  },\r\n  computed: {\r\n      totPrice() {\r\n          let totalPrice = 0\r\n          for(let i in this.inCart){\r\n              if(this.inCart[i].quantity > 0){\r\n                  totalPrice += (this.inCart[i].price*this.inCart[i].quantity)\r\n              }\r\n          }\r\n          return totalPrice\r\n      }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views"}]}